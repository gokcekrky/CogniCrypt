language: java

jdk:
  - oraclejdk8
  
build:

  pre_ci_boot:
  
    options: "-v /tmp/.X11-unix:/tmp/.X11-unix -e DISPLAY=unix$DISPLAY"
   
  ci:
   - export DISPLAY=:0
   - cd mvn-parent
   - mvn clean verify surefire:test -e --fail-at-end
   
  on_success:
   - if [ "$BRANCH" == "master" ]; then cd ../repository; chmod +x upload.sh; ./upload.sh; fi

