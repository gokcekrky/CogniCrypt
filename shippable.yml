language: java

jdk:
  - oraclejdk8
  
build:
  ci:
   - cd mvn-parent
   - mvn clean verify surefire:test --fail-at-end
   
  on_success:
  #### THIS CURRENTLY USES SSHPASS FOR AUTHENTICATION! THIS IS INSECURE! FULLY SWITCH TO USING ONLY SSH KEYS ASAP! ####
   - if [ "$BRANCH" == "CurrentlyOutOfOrder" ]; then sudo apt-get install sshpass; cd ../repository; chmod +x upload.sh; ./upload.sh; fi
   
resources:
  - name: eclipseFTPkv
    type: integration
    integrationName: UpdateSitePassword

